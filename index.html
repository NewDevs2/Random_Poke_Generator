<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    @font-face {
    font-family: 'NeoDunggeunmoPro-Regular';
    src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2302@1.0/NeoDunggeunmoPro-Regular.woff2') format('woff2');
    font-weight: normal;
    font-style: normal;
}
    * {
      font-family: 'NeoDunggeunmoPro-Regular';
    }

  </style>
</head>
<body>
  <div id="root"></div>
  <script>
    const root = document.getElementById('root');
    root.style.cssText="display : flex; justify-content : center; align-items : center; flex-direction : column;width : 100vw; height : 100vh;";
    const xhr = new XMLHttpRequest();
    const _URL = 'https://pokeapi.co/api/v2/pokemon?limit=1010&offset=0'

    let createPokemonPicture;
    let createPokemonName;
    
    document.body.onload = function() {
      createPokemonPicture = document.createElement('img');
      createPokemonName = document.createElement('h1');
    }

    for (let i = 0; i < 4; i++) {
      const creatDiv = document.createElement('div');
      creatDiv.setAttribute("class", "items");
      root.appendChild(creatDiv);
    }
    

    const createBtn = document.createElement('button');
    createBtn.textContent = "뽑기";
    createBtn.setAttribute("class", "create-button");
    root.children[3].appendChild(createBtn);
    createBtn.style.cssText = "width:200px; height:100px; font-size:32px;"
    
    
    
    const ohDoctor = document.createElement('img');
    ohDoctor.setAttribute("src", "https://static.wikia.nocookie.net/pokemon/images/a/ab/%EC%98%A4%EB%B0%95%EC%82%AC_%EB%A0%88%EC%B8%A0%EA%B3%A0_%EA%B3%B5%EC%8B%9D_%EC%9D%BC%EB%9F%AC%EC%8A%A4%ED%8A%B8.png/revision/latest?cb=20180714100119&path-prefix=ko");
    root.children[0].appendChild(ohDoctor);
    ohDoctor.style.cssText="width:100px; height:100px;"
    
    
    
    let pokeName;
    xhr.open('GET', _URL);
    xhr.send();
    xhr.addEventListener('load', function() {
      pokeName = JSON.parse(xhr.response);
      return pokeName;
    })
    
    function randomSelect () {
      let random = Math.floor(Math.random() * 1010);
      const randomPick = pokeName.results[random];
      const xhr = new XMLHttpRequest();
      xhr.open('GET', randomPick.url);
      xhr.send();
      xhr.addEventListener('load', function() {
        const pokemonInfo = JSON.parse(xhr.response);
        
        
        const pokemonPicture = pokemonInfo.sprites.front_default;
        createPokemonPicture.setAttribute("src", pokemonPicture);
        root.children[1].appendChild(createPokemonPicture);
        
        xhr.open('GET', pokemonInfo.species.url);
        xhr.send();
        xhr.addEventListener('load', function() {
          const pokemonName = JSON.parse(xhr.response);
          createPokemonName.innerText = pokemonName.names[2].name;
          root.children[2].appendChild(createPokemonName);
        })
        createBtn.textContent = "다시 뽑기";
      })      
    }
    
    createBtn.addEventListener("click", randomSelect);
    

    // createBtn.addEventListener("click", function() {
      //   if (createBtn.textContent === "다시 뽑기") {
        //     root.children[2].remove();
        //     root.children[1].remove();
        //   }
        // });
        </script>
</body>
</html>
