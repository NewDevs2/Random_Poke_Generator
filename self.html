<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    @font-face {
    font-family: 'NeoDunggeunmoPro-Regular';
    src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2302@1.0/NeoDunggeunmoPro-Regular.woff2') format('woff2');
    font-weight: normal;
    font-style: normal;
}
    * {
      font-family: 'NeoDunggeunmoPro-Regular';
    }

  </style>
</head>
<body>
  <div id="root"></div>
  <script>
    const root = document.getElementById('root');
    root.style.cssText="display : flex; justify-content : center; align-items : center; flex-direction : column;width : 100vw; height : 100vh;";
    const xhr = new XMLHttpRequest();
    const _URL = 'https://pokeapi.co/api/v2/pokemon?limit=1010&offset=0'
    
    for (let i = 0; i < 4; i++) {
      const creatDiv = document.createElement('div');
      creatDiv.setAttribute("class", "items");
      root.appendChild(creatDiv);
    }


    const createBtn = document.createElement('button');
    createBtn.textContent = "뽑기";
    createBtn.setAttribute("class", "create-button");
    root.children[3].appendChild(createBtn);
    createBtn.style.cssText = "width:200px; height:100px; font-size:32px;"

    
    
    const ohDoctor = document.createElement('img');
    ohDoctor.setAttribute("src", "https://i.namu.wiki/i/z9PdYANrjSX71l0tk_Og7o_Qvhfkd9durUP0dSZqN19RePCZmBMwBCp_kHza1QZ9WowH404vPtau6RbbPFYNGA.png");
    root.children[0].appendChild(ohDoctor);
    ohDoctor.style.cssText="width:100px; height:100px;"

    let pokeName;
    xhr.open('GET', _URL);
    xhr.send();
    xhr.addEventListener('load', function() {
      pokeName = JSON.parse(xhr.response);
      return pokeName;
    })
    
    function randomSelect () {
      let random = Math.floor(Math.random() * 1010);
      const randomPick = pokeName.results[random];
      xhr.open('GET', randomPick.url);
      xhr.send();
      xhr.addEventListener('load', function() {
        const pokemonInfo = JSON.parse(xhr.response);
        
        const createPokemonPicture = document.createElement('img');
        console.log(pokemonInfo);
        const pokemonPicture = pokemonInfo.sprites.front_default;
        createPokemonPicture.setAttribute("src", pokemonPicture);
        root.children[1].appendChild(createPokemonPicture);

        xhr.open('GET', pokemonInfo.species.url);
        xhr.send();
        xhr.addEventListener('load', function() {
          const pokemonName = JSON.parse(xhr.response);
          const createPokemonName = document.createElement('h1');
          createPokemonName.textContent = pokemonName.names[2].name;
          root.children[2].appendChild(createPokemonName);
        })
        createBtn.textContent = "다시 뽑기";
      })      
    }
    
    createBtn.addEventListener("click", randomSelect);

    createBtn.addEventListener("click", function() {
      if (createBtn.textContent === "다시 뽑기") {
        root.children[2].remove();
        root.children[1].remove();
      }
    });
  </script>
</body>
</html>