<!DOCTYPE html>
<<<<<<< HEAD
<html lang="en">
=======
<html lang="ko">
>>>>>>> kwon_1

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
<<<<<<< HEAD

  <!-- 클래스룸에 올라온 코드 그대로 복붙한 완전 초기 상태 -->

  <div id="root"></div>
  <script>
    const root = document.getElementById('root');
    const button = document.createElement("button");
    button.textContent = "click";
    root.appendChild(button);
    const xhr = new XMLHttpRequest();
    //초기
    const imgtest = new XMLHttpRequest();
    function getRandomInt(min, max) {
      min = Math.ceil(min);
      max = Math.floor(max);
      return Math.floor(Math.random() * (max - min)) + min;  //최댓값은 제외, 최솟값은 포함
    }


    const _URL = 'https://pokeapi.co/api/v2/pokemon?limit=100000&offset=0';
  
    xhr.open('GET', _URL);
    xhr.send();

    let pokedatalistkey = [];
    let testlist = [];

    xhr.addEventListener('load', function () {

      console.log(xhr.response);
      const _PokeData = JSON.parse(xhr.response);
      const h1 = document.createElement('img');

      for (let key in _PokeData.sprites) {
        pokedatalistkey.push(key);
      }

      console.dir(_PokeData.sprites);

      // for (let i = 0; i < pokedatalistkey.length - 2; i++) {
      //   console.log(_PokeData.sprites[pokedatalistkey[i]]);
      //   const img = document.createElement('img');
      //   if (_PokeData.sprites[pokedatalistkey[i]] !== null) {

      //     img.src = _PokeData.sprites[pokedatalistkey[i]];
      //     root.appendChild(img);
      //   }

      // }
      
      // 전체 객체에서 데이터를 담아 두고 있는 객체를 선택

      // for (let i = 0; i < test.length; i++) {
      //   console.dir(test[i].url);//전체 데이터의 2번째 벨류값인 url을 출력
      //   for (let objValues in test[i]) {
      //     if (test[i].hasOwnProperty(objValues)) {
      //       testlist.push(test[i][objValues]);
      //     };
      //   }
      // }


      // imgtest.addEventListener('load', function () {
      //   console.log(testlist[1]);
      //   for (let i = 2; i < testlist.length; i++) {
      //     sum = i * 2;
      //     imgtest.open('GET', testlist[i]);
      //     imgtest.send();

      //   }
      //   const _PokeDataurl = JSON.parse(imgtest.response);
      //   console.log(_PokeDataurl);


      // });





      // h1.textContent = test[i].name;
      // root.appendChild(h1);


    });


    button.addEventListener("click",function(){



      
    });



=======
  <div id="root"></div>
  <button type="button" onclick="randomPick()">click</button>
  <script>
    // 변수 xhr에 XHR 초기화 선언
    const xhr = new XMLHttpRequest();

    // 모든 포켓몬 리스트 API URL
    const _URL = 'https://pokeapi.co/api/v2/pokemon?limit=100000&offset=0';

    
    // 모든 포켓몬 리스트 API URL에서 가져온 데이터를 저장하기 위한 변수 선언
    let PokeList;

    // 모든 포켓몬 리스트 API에 연결
    xhr.open('GET', _URL);

    // 모든 포켓몬 리스트에 요청 전송
    xhr.send();

    // 전송한 요청이 응답 되었을 때
    xhr.addEventListener('load', function () {

      // 모든 포켓몬 리스트를 파싱하여 변수에 저장
      PokeList = JSON.parse(xhr.response);
      return PokeList
    })

    // 버튼 클릭 이벤트
    function randomPick() {

      // n번째 포켓몬 랜덤 선택을 위한 랜덤 값 생성
      let randomPick = Math.floor(Math.random() * 1281)

      // 모든 포켓몬 리스트의 n번째 포켓몬으로 access
      const pokePick = PokeList.results[randomPick]
      console.log(pokePick.url);

      // 새로운 통신 객체 생성 / 변수에 저장
      const xhr = new XMLHttpRequest();

      // n번째 포켓몬의 url에 접속, 요청
      xhr.open('GET', pokePick.url);
      xhr.send();


      xhr.addEventListener('load', function () {
        // n번째 포켓몬의 이름 데이터, 사진 데이터를 지정
        const abc = JSON.parse(xhr.response);
        const pokeName = abc.name;
        const frontPhoto = abc.sprites.front_default;

        const poname = abc.species.url;
        console.dir(poname);

        const testname = new XMLHttpRequest();

        testname.open('GET', poname);
        testname.send();
        testname.addEventListener('load', function () {
       
          const par = JSON.parse(testname.response);
          console.log(par.names[2].name);
          let nick = par.names[2].name;
          const nameNick = document.createElement('p');    
          nameNick.innerText = nick;
          document.body.appendChild(nameNick);
    
        })



        if (frontPhoto !== null) { // n번째 포켓몬의 사진이 있을 때
          const test1 = document.createElement('img');
     
          test1.setAttribute('src', frontPhoto);
          document.body.appendChild(test1);
          const test2 = document.createElement('p');
      
          test2.innerText = pokeName;
       

          document.body.appendChild(test2);
        } else { // n번째 포켓몬의 사진이 없을 때
          randomPick() // ★★★★★★★★★★ 재귀함수 (함수를 다시 처음부터 실행하라)
        }


      })
    }
>>>>>>> kwon_1
  </script>
</body>

</html>